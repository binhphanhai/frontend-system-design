<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-frontend-system-design/rich-text-editor" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Rich Text Editor System Design | Frontend Interview Preparation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://binhphanhai.github.io/frontend-system-design/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://binhphanhai.github.io/frontend-system-design/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://binhphanhai.github.io/frontend-system-design/docs/frontend-system-design/rich-text-editor"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Rich Text Editor System Design | Frontend Interview Preparation"><meta data-rh="true" name="description" content="System design interview question: Design an extensible rich text editor component that allows users to create and edit text with various formatting options."><meta data-rh="true" property="og:description" content="System design interview question: Design an extensible rich text editor component that allows users to create and edit text with various formatting options."><link data-rh="true" rel="icon" href="/frontend-system-design/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://binhphanhai.github.io/frontend-system-design/docs/frontend-system-design/rich-text-editor"><link data-rh="true" rel="alternate" href="https://binhphanhai.github.io/frontend-system-design/docs/frontend-system-design/rich-text-editor" hreflang="en"><link data-rh="true" rel="alternate" href="https://binhphanhai.github.io/frontend-system-design/docs/frontend-system-design/rich-text-editor" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Rich Text Editor System Design","item":"https://binhphanhai.github.io/frontend-system-design/docs/frontend-system-design/rich-text-editor"}]}</script><link rel="alternate" type="application/rss+xml" href="/frontend-system-design/blog/rss.xml" title="Frontend Interview Preparation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/frontend-system-design/blog/atom.xml" title="Frontend Interview Preparation Atom Feed">




<link rel="icon" href="/frontend-system-design/img/docusaurus.png">
<link rel="manifest" href="/frontend-system-design/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/frontend-system-design/img/docusaurus.png">
<link rel="mask-icon" href="/frontend-system-design/img/docusaurus.svg" color="rgb(37, 194, 160)">
<meta name="msapplication-TileImage" content="/frontend-system-design/img/docusaurus.png">
<meta name="msapplication-TileColor" content="#000"><link rel="stylesheet" href="/frontend-system-design/assets/css/styles.9016c31d.css">
<script src="/frontend-system-design/assets/js/runtime~main.04a829fc.js" defer="defer"></script>
<script src="/frontend-system-design/assets/js/main.d1d12a11.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/frontend-system-design/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/frontend-system-design/"><div class="navbar__logo"><img src="/frontend-system-design/img/logo.svg" alt="Frontend Interview Preparation Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/frontend-system-design/img/logo.svg" alt="Frontend Interview Preparation Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Frontend Interview Prep</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/frontend-system-design/docs/frontend-system-design/intro">System Design</a><a class="navbar__item navbar__link" href="/frontend-system-design/docs/frontend-interview/frontend-interview-intro">Frontend Interview</a><a class="navbar__item navbar__link" href="/frontend-system-design/docs/react-interview/react-interview-intro">React Interview</a><a class="navbar__item navbar__link" href="/frontend-system-design/docs/behavior-interview/behavioral-interview-intro">Behavioral Interview</a><a class="navbar__item navbar__link" href="/frontend-system-design/docs/javascript-practical/intro">JavaScript Practical</a><a class="navbar__item navbar__link" href="/frontend-system-design/docs/project-detail/tomteptalk">Project Details</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/binhphanhai/frontend-system-design" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/frontend-system-design/docs/frontend-system-design/intro">Frontend System Design Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/frontend-system-design/docs/frontend-system-design/frontend-system-design-intro">Fundamentals</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/frontend-system-design/docs/frontend-system-design/news-feed">Social &amp; Content Platforms</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/frontend-system-design/docs/frontend-system-design/rich-text-editor">Text &amp; Document Editing</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/frontend-system-design/docs/frontend-system-design/rich-text-editor">Rich Text Editor System Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/frontend-system-design/docs/frontend-system-design/google-docs">Google Docs System Design: Real-Time Collaborative Document Editing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/frontend-system-design/docs/frontend-system-design/email-client">Email Client System Design (e.g. Microsoft Outlook)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/frontend-system-design/docs/frontend-system-design/autocomplete">Search &amp; Navigation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/frontend-system-design/docs/frontend-system-design/video-streaming">Media &amp; Entertainment</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/frontend-system-design/docs/frontend-system-design/ecommerce-marketplace">E-commerce &amp; Business</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/frontend-system-design/docs/frontend-system-design/modal-dialog">UI Components</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/frontend-system-design/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Text &amp; Document Editing</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Rich Text Editor System Design</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Rich Text Editor System Design</h1></header>
<p><em>System design interview question: Design an extensible rich text editor component that allows users to create and edit text with various formatting options.</em></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>Rich text editors (RTEs), or WYSIWYG editors, are complex UI components that allow users to format text visually, supporting features like bold, italics, headings, and more. They are used in products like Gmail, Facebook, Medium, and collaborative tools. This document provides a deep, technical dive into designing a modern, extensible, performant, and accessible rich text editor, using Meta&#x27;s <a href="https://lexical.dev/" target="_blank" rel="noopener noreferrer">Lexical</a> as a reference architecture, and covers all major and minor aspects of such a system.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-real-world-examples">1. Real-World Examples<a href="#1-real-world-examples" class="hash-link" aria-label="Direct link to 1. Real-World Examples" title="Direct link to 1. Real-World Examples">​</a></h2>
<ul>
<li><a href="https://lexical.dev/" target="_blank" rel="noopener noreferrer">Lexical</a></li>
<li><a href="https://tiptap.dev/" target="_blank" rel="noopener noreferrer">Tiptap</a></li>
<li><a href="http://slatejs.org/" target="_blank" rel="noopener noreferrer">Slate</a></li>
<li><a href="https://quilljs.com/" target="_blank" rel="noopener noreferrer">Quill</a></li>
<li><a href="https://draftjs.org/" target="_blank" rel="noopener noreferrer">Draft.js</a> (predecessor of Lexical)</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-requirements-exploration">2. Requirements Exploration<a href="#2-requirements-exploration" class="hash-link" aria-label="Direct link to 2. Requirements Exploration" title="Direct link to 2. Requirements Exploration">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="functional-requirements">Functional Requirements<a href="#functional-requirements" class="hash-link" aria-label="Direct link to Functional Requirements" title="Direct link to Functional Requirements">​</a></h3>
<ul>
<li><strong>Block formatting:</strong> Headings, paragraphs, blockquotes</li>
<li><strong>Inline formatting:</strong> Bold, underline, italics</li>
<li><strong>Media insertion:</strong> (Optional) Images, videos, etc.</li>
<li><strong>Keyboard shortcuts:</strong> Copy, cut, paste, redo, undo, formatting</li>
<li><strong>Customizability:</strong> Theming, extensibility, custom nodes</li>
<li><strong>Undo/redo:</strong> Support for reverting and reapplying changes</li>
<li><strong>Serialization:</strong> Save/load content as JSON or HTML</li>
<li><strong>Collaboration:</strong> (Advanced) Real-time multi-user editing</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="non-functional-requirements">Non-Functional Requirements<a href="#non-functional-requirements" class="hash-link" aria-label="Direct link to Non-Functional Requirements" title="Direct link to Non-Functional Requirements">​</a></h3>
<ul>
<li><strong>Performance:</strong> Instant updates, even for large documents</li>
<li><strong>Cross-browser:</strong> Consistent experience across browsers</li>
<li><strong>Accessibility:</strong> Keyboard navigation, screen reader support, ARIA</li>
<li><strong>Security:</strong> Prevent XSS and unsafe HTML</li>
<li><strong>Internationalization:</strong> RTL, IME support</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-rendering-approaches">3. Rendering Approaches<a href="#3-rendering-approaches" class="hash-link" aria-label="Direct link to 3. Rendering Approaches" title="Direct link to 3. Rendering Approaches">​</a></h2>
<table><thead><tr><th>Approach</th><th>Rich Formatting</th><th>Cursors</th><th>Implementation Effort</th><th>Cross-browser</th></tr></thead><tbody><tr><td><code>&lt;textarea&gt;</code></td><td>No</td><td>Supported</td><td>N/A</td><td>Same</td></tr><tr><td>DOM with fake cursors</td><td>Supported</td><td>Custom</td><td>High</td><td>Same</td></tr><tr><td><code>contenteditable</code></td><td>Supported</td><td>Supported</td><td>Moderate</td><td>Some diffs</td></tr><tr><td><code>&lt;canvas&gt;</code></td><td>Custom</td><td>Custom</td><td>Very high</td><td>Same</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="comparison">Comparison<a href="#comparison" class="hash-link" aria-label="Direct link to Comparison" title="Direct link to Comparison">​</a></h3>
<ul>
<li><strong><code>&lt;textarea&gt;</code></strong>: Only plain text, not suitable for rich formatting.</li>
<li><strong>DOM with fake cursors</strong>: Complex, must manually calculate cursor position/height.</li>
<li><strong><code>contenteditable</code></strong>: Best trade-off; supports native editing, cursors, and formatting, but has browser inconsistencies and security concerns (HTML storage).</li>
<li><strong><code>&lt;canvas&gt;</code></strong>: Full control, but must reimplement layout, selection, accessibility, and more. Used by Google Docs for performance and consistency.</li>
</ul>
<blockquote>
<p><strong>Most modern RTEs use <code>contenteditable</code> as the foundation, patching its limitations with custom event handling and state management.</strong></p>
</blockquote>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-architecture--high-level-design">4. Architecture / High-Level Design<a href="#4-architecture--high-level-design" class="hash-link" aria-label="Direct link to 4. Architecture / High-Level Design" title="Direct link to 4. Architecture / High-Level Design">​</a></h2>
<p><img decoding="async" loading="lazy" src="https://www.gfecdn.net/img/questions/rich-text-editor/rich-text-editor-architecture.png" alt="Rich text editor architecture" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="core-components">Core Components<a href="#core-components" class="hash-link" aria-label="Direct link to Core Components" title="Direct link to Core Components">​</a></h3>
<ul>
<li><strong>Editor Core</strong>: Handles user events, state updates, and DOM reconciliation</li>
<li><strong>Plugins</strong>: Extend functionality (e.g., rich formatting, collaboration)</li>
<li><strong>Node-based Content Model</strong>: Tree structure for blocks and inlines</li>
<li><strong>Toolbar</strong>: UI for formatting actions</li>
<li><strong>Listeners &amp; Transforms</strong>: Hooks for reacting to state changes and transforming content</li>
<li><strong>Headless Mode</strong>: Editor logic can run without a UI, useful for testing and server-side manipulation</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-data-model">5. Data Model<a href="#5-data-model" class="hash-link" aria-label="Direct link to 5. Data Model" title="Direct link to 5. Data Model">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="core-entities">Core Entities<a href="#core-entities" class="hash-link" aria-label="Direct link to Core Entities" title="Direct link to Core Entities">​</a></h3>
<ul>
<li><strong>Editor</strong>: Manages state, selection, plugins, and DOM reference</li>
<li><strong>EditorState</strong>: Immutable snapshot of content and selection</li>
<li><strong>EditorNode</strong>: Base class for all content nodes<!-- -->
<ul>
<li><strong>ElementNode</strong>: Can have children (e.g., paragraphs, headings)</li>
<li><strong>TextNode</strong>: Leaf node, holds text and formatting</li>
</ul>
</li>
<li><strong>Selection</strong>: Anchor/focus nodes and offsets, direction</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-typescript">Example (TypeScript)<a href="#example-typescript" class="hash-link" aria-label="Direct link to Example (TypeScript)" title="Direct link to Example (TypeScript)">​</a></h4>
<div class="language-ts codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ts codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">Editor</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rootElement</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> HTMLElement </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  editorState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> EditorState</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  pendingEditorState</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> EditorState </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">EditorState</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nodes</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> EditorNodeMap</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  rootNodeKey</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> NodeKey</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  selection</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> EditorSelection </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">NodeKey</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token class-name">EditorNodeMap</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Record</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">NodeKey</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> EditorNode</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">EditorNode</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  parent</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> NodeKey </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prev</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> NodeKey </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  next</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> NodeKey </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">ElementNode</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">EditorNode</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;element&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  firstChild</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> NodeKey </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lastChild</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> NodeKey </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">TextNode</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">EditorNode</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;text&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  text</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  format</span><span class="token operator" style="color:#393A34">?</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">interface</span><span class="token plain"> </span><span class="token class-name">EditorSelection</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  anchorNode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> EditorNode </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  anchorOffset</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  focusNode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> EditorNode </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  focusOffset</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;caret&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;range&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="content-tree-example">Content Tree Example<a href="#content-tree-example" class="hash-link" aria-label="Direct link to Content Tree Example" title="Direct link to Content Tree Example">​</a></h4>
<p><img decoding="async" loading="lazy" src="https://www.gfecdn.net/img/questions/rich-text-editor/rich-text-editor-tree.png" alt="Rich text editor tree" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="nodemap-with-linked-list-pointers">NodeMap with Linked List Pointers<a href="#nodemap-with-linked-list-pointers" class="hash-link" aria-label="Direct link to NodeMap with Linked List Pointers" title="Direct link to NodeMap with Linked List Pointers">​</a></h4>
<p><img decoding="async" loading="lazy" src="https://www.gfecdn.net/img/questions/rich-text-editor/rich-text-editor-linked-list.png" alt="Rich text editor linked list" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="formatting-example">Formatting Example<a href="#formatting-example" class="hash-link" aria-label="Direct link to Formatting Example" title="Direct link to Formatting Example">​</a></h4>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">TextNode</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">Tarzan </span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">format</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">[</span><span class="token tag script language-javascript string" style="color:#e3116c">&#x27;bold&#x27;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">]</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">TextNode</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">and</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">format</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">[</span><span class="token tag script language-javascript string" style="color:#e3116c">&#x27;bold&#x27;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">,</span><span class="token tag script language-javascript" style="color:#00009f"> </span><span class="token tag script language-javascript string" style="color:#e3116c">&#x27;underline&#x27;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">]</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag class-name" style="color:#00009f">TextNode</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c"> Jane</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">format</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#393A34">=</span><span class="token tag script language-javascript punctuation" style="color:#393A34">{</span><span class="token tag script language-javascript punctuation" style="color:#393A34">[</span><span class="token tag script language-javascript string" style="color:#e3116c">&#x27;underline&#x27;</span><span class="token tag script language-javascript punctuation" style="color:#393A34">]</span><span class="token tag script language-javascript punctuation" style="color:#393A34">}</span><span class="token tag" style="color:#00009f"> </span><span class="token tag punctuation" style="color:#393A34">/&gt;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-state-management--update-flow">6. State Management &amp; Update Flow<a href="#6-state-management--update-flow" class="hash-link" aria-label="Direct link to 6. State Management &amp; Update Flow" title="Direct link to 6. State Management &amp; Update Flow">​</a></h2>
<ol>
<li><strong>User event</strong> (input, keypress, toolbar click)</li>
<li><strong>Command dispatched</strong> (e.g., FORMAT_TEXT)</li>
<li><strong>Clone state</strong> (shallow copy of NodeMap)</li>
<li><strong>Modify state</strong> (update nodes, mark dirty)</li>
<li><strong>Transforms</strong> (run on dirty nodes)</li>
<li><strong>Reconciliation</strong> (diff old/new state, update DOM minimally)</li>
<li><strong>Listeners</strong> (notify plugins/UI)</li>
</ol>
<blockquote>
<p>Lexical&#x27;s reconciliation is similar to React&#x27;s virtual DOM diffing, but is framework-agnostic.</p>
</blockquote>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="update-loop-in-detail">Update Loop in Detail<a href="#update-loop-in-detail" class="hash-link" aria-label="Direct link to Update Loop in Detail" title="Direct link to Update Loop in Detail">​</a></h4>
<ul>
<li><strong>Clone state:</strong> Editor makes a shallow clone of the content state (NodeMap).</li>
<li><strong>Process updates:</strong> Callback modifies nodes, marks dirty, and can queue further updates.</li>
<li><strong>Process transforms:</strong> All registered transforms for dirty nodes are called.</li>
<li><strong>Reconciliation:</strong> Dirty nodes are diffed and DOM is updated minimally.</li>
<li><strong>Listeners:</strong> All registered listeners are called after update.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-api--extensibility">7. API &amp; Extensibility<a href="#7-api--extensibility" class="hash-link" aria-label="Direct link to 7. API &amp; Extensibility" title="Direct link to 7. API &amp; Extensibility">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="editor-apis">Editor APIs<a href="#editor-apis" class="hash-link" aria-label="Direct link to Editor APIs" title="Direct link to Editor APIs">​</a></h3>
<ul>
<li><code>editor.update(fn)</code> – Update state via callback</li>
<li><code>editor.setEditorState(state)</code> – Replace state</li>
<li><code>editor.getEditorState()</code> / <code>editor.getEditorStateSerialized()</code> – Export state</li>
<li><code>editor.parseEditorState(serialized)</code> – Import state</li>
<li><code>editor.dispatchCommand(command, payload)</code> – Dispatch command</li>
<li><code>editor.registerCommand(command, callback, priority)</code> – Listen for commands</li>
<li><code>editor.registerUpdateListener(callback)</code> – Listen for updates</li>
<li><code>editor.registerNodeTransform(nodeType, callback)</code> – Listen for node changes</li>
<li><code>editor.getNodeByKey(key)</code> – Get node by key</li>
<li><code>editor.getElementByKey(key)</code> – Get DOM element for node</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-apis">Node APIs<a href="#node-apis" class="hash-link" aria-label="Direct link to Node APIs" title="Direct link to Node APIs">​</a></h3>
<ul>
<li><code>getParent()</code>, <code>getNextSibling()</code>, <code>insertAfter()</code>, <code>isSelected()</code>, <code>getTextContent()</code></li>
<li><code>ElementNode</code>: <code>getChildren()</code>, <code>getFirstChild()</code>, <code>getLastChild()</code></li>
<li><code>TextNode</code>: <code>setTextContent()</code>, <code>setFormat()</code>, <code>getFormat()</code></li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="8-plugins-listeners-and-transforms">8. Plugins, Listeners, and Transforms<a href="#8-plugins-listeners-and-transforms" class="hash-link" aria-label="Direct link to 8. Plugins, Listeners, and Transforms" title="Direct link to 8. Plugins, Listeners, and Transforms">​</a></h2>
<ul>
<li><strong>Plugins</strong>: Combine commands, transforms, and custom nodes to add features (e.g., rich formatting, collaboration)</li>
<li><strong>Listeners</strong>: Register callbacks for updates or specific commands</li>
<li><strong>Transforms</strong>: Run on dirty nodes after updates, before reconciliation (e.g., auto-linking, hashtag detection)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-bold-command">Example: Bold Command<a href="#example-bold-command" class="hash-link" aria-label="Direct link to Example: Bold Command" title="Direct link to Example: Bold Command">​</a></h4>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">editor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">registerCommand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;FORMAT_BOLD_COMMAND&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Custom code to handle bold formatting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Stop propagation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-transform">Example: Transform<a href="#example-transform" class="hash-link" aria-label="Direct link to Example: Transform" title="Direct link to Example: Transform">​</a></h4>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">editor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">registerNodeTransform</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">TextNode</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">textNode</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">textNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getTextContent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">includes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;congratulations&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    textNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">setFormat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;bold&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="9-serialization--undoredo">9. Serialization &amp; Undo/Redo<a href="#9-serialization--undoredo" class="hash-link" aria-label="Direct link to 9. Serialization &amp; Undo/Redo" title="Direct link to 9. Serialization &amp; Undo/Redo">​</a></h2>
<ul>
<li><strong>Serialization</strong>: Each node implements <code>exportJSON()</code> and <code>importJSON()</code> for persistence and copy/paste.</li>
<li><strong>Undo/Redo</strong>: Two-stack model (undo/redo), with immutable EditorStates and structural sharing for efficiency.</li>
<li><strong>Granularity</strong>: Lexical coalesces continuous typing into single undo actions for usability and performance.</li>
<li><strong>Structural sharing</strong>: Only changed nodes are cloned, others are shared for memory efficiency.</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="10-keyboard-shortcuts--accessibility">10. Keyboard Shortcuts &amp; Accessibility<a href="#10-keyboard-shortcuts--accessibility" class="hash-link" aria-label="Direct link to 10. Keyboard Shortcuts &amp; Accessibility" title="Direct link to 10. Keyboard Shortcuts &amp; Accessibility">​</a></h2>
<ul>
<li><strong>Keyboard shortcuts</strong>: Handled via <code>beforeinput</code> and <code>keydown</code> events, mapped to normalized commands (e.g., FORMAT_BOLD_COMMAND)</li>
<li><strong>Accessibility</strong>:<!-- -->
<ul>
<li>ARIA roles and properties (e.g., <code>role=&quot;textbox&quot;</code>, <code>role=&quot;toolbar&quot;</code>)</li>
<li>Logical tab order</li>
<li>Screen reader support</li>
<li>Visible focus indicators</li>
<li>Semantic HTML for content</li>
<li>Support for speech-to-text (e.g., Dragon NaturallySpeaking)</li>
</ul>
</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="11-theming--customization">11. Theming &amp; Customization<a href="#11-theming--customization" class="hash-link" aria-label="Direct link to 11. Theming &amp; Customization" title="Direct link to 11. Theming &amp; Customization">​</a></h2>
<ul>
<li><strong>CSS</strong>: Style output using standard CSS or scoped selectors</li>
<li><strong>Theme object</strong>: Map node types to CSS classes</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> theme </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">heading</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;editor-heading&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">paragraph</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;editor-paragraph&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">text</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;editor-text&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="12-custom-nodes--extensibility">12. Custom Nodes &amp; Extensibility<a href="#12-custom-nodes--extensibility" class="hash-link" aria-label="Direct link to 12. Custom Nodes &amp; Extensibility" title="Direct link to 12. Custom Nodes &amp; Extensibility">​</a></h2>
<ul>
<li>Extend base nodes to add new features (e.g., colored text, mentions, embeds)</li>
<li>Register custom nodes in the editor&#x27;s config</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-coloredtextnode">Example: ColoredTextNode<a href="#example-coloredtextnode" class="hash-link" aria-label="Direct link to Example: ColoredTextNode" title="Direct link to Example: ColoredTextNode">​</a></h4>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">ColoredNode</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">extends</span><span class="token plain"> </span><span class="token class-name">TextNode</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">__color</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> string</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">text</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> color</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">text</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">__color</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> color</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;colored&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">static</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">clone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">node</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">ColoredNode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">__text</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">__color</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> node</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">__key</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">createDOM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> element </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">super</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createDOM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    element</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">style</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">color</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">__color</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> element</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">updateDOM</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">prevNode</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> dom</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> config</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prevNode</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">__color</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">__color</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      dom</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">style</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">color</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">__color</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="13-performance-optimizations">13. Performance Optimizations<a href="#13-performance-optimizations" class="hash-link" aria-label="Direct link to 13. Performance Optimizations" title="Direct link to 13. Performance Optimizations">​</a></h2>
<ul>
<li><strong>Lightweight core</strong>: Lexical is ~22kb min+gzip</li>
<li><strong>Modular plugins</strong>: Only load what you need</li>
<li><strong>Lazy loading</strong>: Defer plugin loading until needed</li>
<li><strong>Efficient updates</strong>: Immutable state, batched updates, minimal DOM changes</li>
<li><strong>Efficient reconciliation</strong>: Virtual DOM-like diffing</li>
<li><strong>Efficient selection model</strong>: Mirrors browser selection, supports anchor/focus, direction, and multi-range</li>
<li><strong>Batching and coalescing</strong>: Group related changes for performance</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="14-internationalization-i18n">14. Internationalization (i18n)<a href="#14-internationalization-i18n" class="hash-link" aria-label="Direct link to 14. Internationalization (i18n)" title="Direct link to 14. Internationalization (i18n)">​</a></h2>
<ul>
<li><strong>RTL support</strong>: Direction property on nodes, layout adapts for right-to-left languages</li>
<li><strong>IME support</strong>: Works with input method editors for complex scripts (Chinese, Japanese, Korean)</li>
<li><strong>Locale-aware shortcuts</strong>: Customizable keyboard shortcuts for different locales</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="15-real-time-collaboration-advanced">15. Real-Time Collaboration (Advanced)<a href="#15-real-time-collaboration-advanced" class="hash-link" aria-label="Direct link to 15. Real-Time Collaboration (Advanced)" title="Direct link to 15. Real-Time Collaboration (Advanced)">​</a></h2>
<ul>
<li><strong>CRDT/OT</strong>: Use Yjs or similar for conflict-free real-time editing</li>
<li><strong>WebSockets</strong>: For real-time updates</li>
<li><strong>LexicalCollaborationPlugin</strong>: Integrates Yjs with Lexical</li>
<li><strong>Conflict resolution</strong>: Handles simultaneous edits, merges changes</li>
<li><strong>Undo/redo in collaboration</strong>: Can be scoped to user or global</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="16-deep-dives--advanced-topics">16. Deep Dives &amp; Advanced Topics<a href="#16-deep-dives--advanced-topics" class="hash-link" aria-label="Direct link to 16. Deep Dives &amp; Advanced Topics" title="Direct link to 16. Deep Dives &amp; Advanced Topics">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="model-and-state-design">Model and State Design<a href="#model-and-state-design" class="hash-link" aria-label="Direct link to Model and State Design" title="Direct link to Model and State Design">​</a></h3>
<ul>
<li><strong>Why not use DOM as state?</strong>
<ul>
<li>No built-in undo/redo, hard to store extra fields, DOM is bloated, prone to tampering</li>
</ul>
</li>
<li><strong>Tree vs. Map+Linked List</strong>
<ul>
<li>Map+linked list enables O(1) access, efficient cloning, and parent/child/sibling navigation</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="formatting-internals">Formatting Internals<a href="#formatting-internals" class="hash-link" aria-label="Direct link to Formatting Internals" title="Direct link to Formatting Internals">​</a></h3>
<ul>
<li><strong>Nested tags</strong>: Many ways to represent formatting in HTML; Lexical uses flat TextNodes with format arrays for simplicity and efficient editing</li>
<li><strong>Format ranges</strong>: Alternative is to use start/end indices, but this complicates updates</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="selection-state">Selection State<a href="#selection-state" class="hash-link" aria-label="Direct link to Selection State" title="Direct link to Selection State">​</a></h3>
<ul>
<li><strong>Anchor/focus, direction</strong>: Mirrors browser selection, supports forward/backward selection</li>
<li><strong>Selection events</strong>: Listens to <code>selectionchange</code>, keyboard, and mouse events</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reconciliation">Reconciliation<a href="#reconciliation" class="hash-link" aria-label="Direct link to Reconciliation" title="Direct link to Reconciliation">​</a></h3>
<ul>
<li><strong>createDOM/updateDOM</strong>: Each node implements methods for DOM creation and update</li>
<li><strong>Diffing</strong>: Only dirty nodes are updated, minimizing DOM changes</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="undoredo-internals">Undo/Redo Internals<a href="#undoredo-internals" class="hash-link" aria-label="Direct link to Undo/Redo Internals" title="Direct link to Undo/Redo Internals">​</a></h3>
<ul>
<li><strong>Stack-based</strong>: Two stacks (undo/redo), pointer to current state</li>
<li><strong>Structural sharing</strong>: Only changed nodes are cloned, others are shared</li>
<li><strong>Granularity</strong>: Coalescing of typing, batching of actions</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="plugins-listeners-and-commands">Plugins, Listeners, and Commands<a href="#plugins-listeners-and-commands" class="hash-link" aria-label="Direct link to Plugins, Listeners, and Commands" title="Direct link to Plugins, Listeners, and Commands">​</a></h3>
<ul>
<li><strong>Commands</strong>: Dispatched for user actions, can be intercepted and handled by plugins</li>
<li><strong>Listeners</strong>: Register for updates, can persist data, update UI, etc.</li>
<li><strong>Transforms</strong>: Efficiently update content in response to changes (e.g., auto-linking, hashtag detection)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="serialization--deserialization">Serialization &amp; Deserialization<a href="#serialization--deserialization" class="hash-link" aria-label="Direct link to Serialization &amp; Deserialization" title="Direct link to Serialization &amp; Deserialization">​</a></h3>
<ul>
<li><strong>exportJSON/importJSON</strong>: Each node serializes/deserializes itself</li>
<li><strong>exportDOM/importDOM</strong>: For copy/paste between editors</li>
<li><strong>Versioning</strong>: Serialized state can include version for backward compatibility</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="accessibility">Accessibility<a href="#accessibility" class="hash-link" aria-label="Direct link to Accessibility" title="Direct link to Accessibility">​</a></h3>
<ul>
<li><strong>ARIA roles</strong>: <code>role=&quot;textbox&quot;</code>, <code>role=&quot;toolbar&quot;</code>, etc.</li>
<li><strong>Screen reader support</strong>: Announces formatting, structure, and changes</li>
<li><strong>Keyboard navigation</strong>: Logical tab order, shortcuts for formatting and navigation</li>
<li><strong>Visible focus</strong>: All interactive elements have visible focus indicators</li>
<li><strong>Semantic HTML</strong>: Use of <code>&lt;strong&gt;</code>, <code>&lt;em&gt;</code>, <code>&lt;ul&gt;</code>, <code>&lt;li&gt;</code>, etc.</li>
<li><strong>Speech-to-text</strong>: Integration with tools like Dragon NaturallySpeaking</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="theming">Theming<a href="#theming" class="hash-link" aria-label="Direct link to Theming" title="Direct link to Theming">​</a></h3>
<ul>
<li><strong>CSS</strong>: Style output using standard CSS or scoped selectors</li>
<li><strong>Theme object</strong>: Map node types to CSS classes</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-nodes">Custom Nodes<a href="#custom-nodes" class="hash-link" aria-label="Direct link to Custom Nodes" title="Direct link to Custom Nodes">​</a></h3>
<ul>
<li><strong>Extendability</strong>: Add new node types for custom features (mentions, embeds, etc.)</li>
<li><strong>Registration</strong>: Pass custom nodes to editor config</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a href="#performance" class="hash-link" aria-label="Direct link to Performance" title="Direct link to Performance">​</a></h3>
<ul>
<li><strong>Immutable state</strong>: Enables efficient undo/redo and collaboration</li>
<li><strong>Batching</strong>: Group related changes</li>
<li><strong>Lazy loading</strong>: Load plugins/features on demand</li>
<li><strong>Efficient reconciliation</strong>: Only update what changed</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="internationalization">Internationalization<a href="#internationalization" class="hash-link" aria-label="Direct link to Internationalization" title="Direct link to Internationalization">​</a></h3>
<ul>
<li><strong>RTL/IME</strong>: Full support for right-to-left and complex input</li>
<li><strong>Locale-aware</strong>: Customizable for different languages and regions</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="real-time-collaboration">Real-Time Collaboration<a href="#real-time-collaboration" class="hash-link" aria-label="Direct link to Real-Time Collaboration" title="Direct link to Real-Time Collaboration">​</a></h3>
<ul>
<li><strong>CRDT/OT</strong>: Conflict-free, real-time editing</li>
<li><strong>WebSockets</strong>: Real-time updates</li>
<li><strong>Undo/redo</strong>: Per-user or global</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="17-references--further-reading">17. References &amp; Further Reading<a href="#17-references--further-reading" class="hash-link" aria-label="Direct link to 17. References &amp; Further Reading" title="Direct link to 17. References &amp; Further Reading">​</a></h2>
<ul>
<li><a href="https://lexical.dev/" target="_blank" rel="noopener noreferrer">Lexical Documentation</a></li>
<li><a href="https://docs.slatejs.org/" target="_blank" rel="noopener noreferrer">Slate.js Docs</a></li>
<li><a href="https://medium.engineering/why-contenteditable-is-terrible-122d8a40e480" target="_blank" rel="noopener noreferrer">Why ContentEditable is Terrible (Medium)</a></li>
<li><a href="https://www.youtube.com/watch?v=EwoS0dIx_OI" target="_blank" rel="noopener noreferrer">Rethinking Rich Text: A Deep Dive Into the Design of Lexical (YouTube)</a></li>
<li><a href="https://lexical.dev/docs/api/classes/lexical.LexicalNode" target="_blank" rel="noopener noreferrer">Lexical API Docs</a></li>
</ul>
<hr>
<p>This document provides a comprehensive, technical overview of the design and implementation of a modern, extensible, and performant rich text editor. It covers architectural decisions, data modeling, update flows, extensibility, accessibility, and real-world trade-offs, serving as a reference for advanced system design interviews and real-world implementations.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/binhphanhai/frontend-system-design/tree/main/Summarize/docs/frontend-system-design/10-rich-text-editor.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/frontend-system-design/docs/frontend-system-design/pinterest"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Pinterest System Design: Masonry Layout and Feed</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/frontend-system-design/docs/frontend-system-design/google-docs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Google Docs System Design: Real-Time Collaborative Document Editing</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#1-real-world-examples" class="table-of-contents__link toc-highlight">1. Real-World Examples</a></li><li><a href="#2-requirements-exploration" class="table-of-contents__link toc-highlight">2. Requirements Exploration</a><ul><li><a href="#functional-requirements" class="table-of-contents__link toc-highlight">Functional Requirements</a></li><li><a href="#non-functional-requirements" class="table-of-contents__link toc-highlight">Non-Functional Requirements</a></li></ul></li><li><a href="#3-rendering-approaches" class="table-of-contents__link toc-highlight">3. Rendering Approaches</a><ul><li><a href="#comparison" class="table-of-contents__link toc-highlight">Comparison</a></li></ul></li><li><a href="#4-architecture--high-level-design" class="table-of-contents__link toc-highlight">4. Architecture / High-Level Design</a><ul><li><a href="#core-components" class="table-of-contents__link toc-highlight">Core Components</a></li></ul></li><li><a href="#5-data-model" class="table-of-contents__link toc-highlight">5. Data Model</a><ul><li><a href="#core-entities" class="table-of-contents__link toc-highlight">Core Entities</a></li></ul></li><li><a href="#6-state-management--update-flow" class="table-of-contents__link toc-highlight">6. State Management &amp; Update Flow</a></li><li><a href="#7-api--extensibility" class="table-of-contents__link toc-highlight">7. API &amp; Extensibility</a><ul><li><a href="#editor-apis" class="table-of-contents__link toc-highlight">Editor APIs</a></li><li><a href="#node-apis" class="table-of-contents__link toc-highlight">Node APIs</a></li></ul></li><li><a href="#8-plugins-listeners-and-transforms" class="table-of-contents__link toc-highlight">8. Plugins, Listeners, and Transforms</a></li><li><a href="#9-serialization--undoredo" class="table-of-contents__link toc-highlight">9. Serialization &amp; Undo/Redo</a></li><li><a href="#10-keyboard-shortcuts--accessibility" class="table-of-contents__link toc-highlight">10. Keyboard Shortcuts &amp; Accessibility</a></li><li><a href="#11-theming--customization" class="table-of-contents__link toc-highlight">11. Theming &amp; Customization</a></li><li><a href="#12-custom-nodes--extensibility" class="table-of-contents__link toc-highlight">12. Custom Nodes &amp; Extensibility</a></li><li><a href="#13-performance-optimizations" class="table-of-contents__link toc-highlight">13. Performance Optimizations</a></li><li><a href="#14-internationalization-i18n" class="table-of-contents__link toc-highlight">14. Internationalization (i18n)</a></li><li><a href="#15-real-time-collaboration-advanced" class="table-of-contents__link toc-highlight">15. Real-Time Collaboration (Advanced)</a></li><li><a href="#16-deep-dives--advanced-topics" class="table-of-contents__link toc-highlight">16. Deep Dives &amp; Advanced Topics</a><ul><li><a href="#model-and-state-design" class="table-of-contents__link toc-highlight">Model and State Design</a></li><li><a href="#formatting-internals" class="table-of-contents__link toc-highlight">Formatting Internals</a></li><li><a href="#selection-state" class="table-of-contents__link toc-highlight">Selection State</a></li><li><a href="#reconciliation" class="table-of-contents__link toc-highlight">Reconciliation</a></li><li><a href="#undoredo-internals" class="table-of-contents__link toc-highlight">Undo/Redo Internals</a></li><li><a href="#plugins-listeners-and-commands" class="table-of-contents__link toc-highlight">Plugins, Listeners, and Commands</a></li><li><a href="#serialization--deserialization" class="table-of-contents__link toc-highlight">Serialization &amp; Deserialization</a></li><li><a href="#accessibility" class="table-of-contents__link toc-highlight">Accessibility</a></li><li><a href="#theming" class="table-of-contents__link toc-highlight">Theming</a></li><li><a href="#custom-nodes" class="table-of-contents__link toc-highlight">Custom Nodes</a></li><li><a href="#performance" class="table-of-contents__link toc-highlight">Performance</a></li><li><a href="#internationalization" class="table-of-contents__link toc-highlight">Internationalization</a></li><li><a href="#real-time-collaboration" class="table-of-contents__link toc-highlight">Real-Time Collaboration</a></li></ul></li><li><a href="#17-references--further-reading" class="table-of-contents__link toc-highlight">17. References &amp; Further Reading</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>